import{a as N,b as ut,c as G,d as ht,e as K,f as ft,g as U,h as wt,i as M,j as bt,k as _,l as xt}from"https://st-p.rmcdn1.net/9abcafdf/dist/c/c-KQMMXL4T.js";import{f as W,t as $,x as gt}from"https://st-p.rmcdn1.net/9abcafdf/dist/c/c-OIX6SKCG.js";import{a as v,b as F}from"https://st-p.rmcdn1.net/9abcafdf/dist/c/c-CCOOUH2V.js";import{a as h,b as V,k as S}from"https://st-p.rmcdn1.net/9abcafdf/dist/c/c-CPMHSB5T.js";import{b as y,c as O}from"https://st-p.rmcdn1.net/9abcafdf/dist/c/c-T7HHWEIA.js";import{a as R,d as mt}from"https://st-p.rmcdn1.net/9abcafdf/dist/c/c-66M2M7BF.js";import{C as H,D as i,E as u,F as w}from"https://st-p.rmcdn1.net/9abcafdf/dist/c/c-QLZFYGE5.js";import{a as pt}from"https://st-p.rmcdn1.net/9abcafdf/dist/c/c-HQKWHWGO.js";import{c as dt}from"https://st-p.rmcdn1.net/9abcafdf/dist/c/c-PEZMTDKX.js";import{a as A,d as ct}from"https://st-p.rmcdn1.net/9abcafdf/dist/c/c-4XCUMATV.js";function q({isVisible:t,isDarkBackground:e,type:n,onClick:d}){let p=`lightbox-arrow-${n}`;return u(yt,{"data-testid":p,position:"absolute",top:"50%",marginTop:"-4rm",zIndex:3100,onClick:d,initial:{opacity:0},animate:{opacity:t?1:0,left:n==="left"?t?24:-40:"auto",right:n==="right"?t?24:-40:"auto"},variant:"clean",children:[i(v,{id:p,children:n==="left"?"Previous":"Next"}),n==="left"?e?i(N,{}):i(K,{}):e?i(G,{}):i(U,{})]})}function vt({isVisible:t,isDarkBackground:e,onPrev:n,onNext:d}){return u(H,{children:[i(q,{isVisible:t,isDarkBackground:e,type:"left",onClick:n}),i(q,{isVisible:t,isDarkBackground:e,type:"right",onClick:d})]})}var yt,J,Q=A(()=>{"use strict";O();F();S();ut();ht();ft();wt();w();yt=h(y);J=vt});function X(t){return u(kt,{initial:{opacity:0},animate:{opacity:t.isVisible?1:0},"data-testid":"lightbox-cross",onClick:t.onClick,position:"absolute",right:"2rm",top:"2rm",zIndex:3100,variant:"clean",children:[i(v,{id:"lightbox-cross",children:"Close"}),t.isDarkBackground?i(M,{}):i(_,{})]})}var kt,Y=A(()=>{"use strict";O();F();S();bt();xt();w();kt=h(y)});function Lt({mode:t,isVisible:e,slides:n,onClose:d,index:a,onSlideChange:c,originRect:p}){let[Z,j]=(0,s.useState)("prev"),o=(0,s.useMemo)(()=>n[a],[n,a]),[tt,I]=(0,s.useState)(!1),[m,it]=(0,s.useState)(!1),f=(0,s.useMemo)(()=>n.map((r,l)=>r.gallery?l:null).filter(r=>r!==null),[n]),k=n.length>1&&o.gallery,{isImageLoaded:ot,preloadImage:et}=Bt(),C=ot(o.imgSrc)||tt&&m&&et(o.imgSrc),P=C?"zoom-out":"wait",nt=(0,s.useMemo)(()=>o?.type?o?.type==="gif":/\.gif/.test(o?.imgSrc),[o?.imgSrc,o?.type]),[L,rt]=(0,s.useState)({height:window.innerHeight,width:window.innerWidth});function D(){rt({height:window.innerHeight,width:window.innerWidth})}let st=(0,s.useMemo)(()=>{let{r,g:l,b:g,a:lt}=W(o.color);return`rgba(${r}, ${l}, ${g}, ${lt})`},[o.color]),at={hidden:{opacity:0},visible:{opacity:1}},z={position:"absolute",inset:0,height:"100%",width:"100%",...nt?{objectFit:"cover"}:{}},T=(0,s.useMemo)(()=>{let{top:r=0,left:l=0,...g}=p;return{...g,top:`${r*100/L.height}%`,left:`${l*100/L.width}%`,opacity:0}},[p,L]);function b(r){if(!k||!c)return;I(!1),j(r);let l=f.indexOf(a),g=r==="next"?l+1:l-1;r==="next"?g<f.length?c(f[g]):c(f[0]):g>=0?c(f[g]):c(f[f.length-1])}function x(){m&&d&&d()}function B(r){switch(r.key){case"Escape":x();break;case"ArrowLeft":b("prev");break;case"ArrowRight":b("next");break;default:break}}(0,s.useEffect)(()=>(window.addEventListener("resize",D),t==="viewer"&&m&&(e?window.addEventListener("keyup",B):window.removeEventListener("keyup",B)),()=>{window.removeEventListener("resize",D),window.removeEventListener("keyup",B)}),[e,o,m]);let E=(0,s.useMemo)(()=>$(o.color),[o]);return u(R,{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2999,pointerEvents:m?"all":"none",children:[i(X,{isDarkBackground:!E,isVisible:e&&m,onClick:x}),t==="viewer"&&k&&i(J,{isDarkBackground:!E,isVisible:e&&m,onPrev:()=>b("prev"),onNext:()=>b("next")}),i(h.div,{onClick:x,variants:at,initial:"hidden",animate:e?"visible":"hidden",style:{backgroundColor:st,position:"absolute",zIndex:0,width:"100%",height:"100%",transition:".3s background-color",cursor:P}}),i(V,{children:e&&i(h.div,{variants:{initial:T,animate:{top:"50%",left:"50%",height:o.height,width:o.width,opacity:1},exit:k?{opacity:0}:T},initial:"initial",animate:"animate",exit:"exit",onClick:x,style:{position:"absolute",zIndex:10,cursor:P},onAnimationComplete:r=>{let l=r==="exit";it(!l),I(!l)},transition:{mass:1,stiffness:170,damping:26},children:u(h.div,{initial:{opacity:0,left:m?Z==="next"?"100%":"-100%":0},animate:{opacity:1,left:"0%"},style:{position:"absolute",transform:"translate(-50%, -50%)",height:"inherit",width:"inherit"},transition:{mass:1,stiffness:170,damping:26},children:[C&&i("img",{style:{...z,zIndex:20},src:o.imgSrc}),i("img",{"data-testid":"lightbox-image",style:{...z,zIndex:10,filter:"blur(0.4px)"},src:o.previewImgSrc})]},o._id)})})]})}function Bt(){let[t,e]=(0,s.useState)({});function n(a){if(t.hasOwnProperty(a))return t[a];let c=new Image;c.onload=()=>{e({...t,[a]:!0})},c.onerror=()=>{let p={...t};delete p[a],e(p)},c.src=a,e({...t,[a]:!1})}function d(a){return t.hasOwnProperty(a)?t[a]:!1}return{isImageLoaded:d,preloadImage:n}}var s,Yt,At=A(()=>{"use strict";s=ct(pt());mt();S();dt();gt();Q();Y();w();Yt=Lt});export{Yt as a,At as b};
